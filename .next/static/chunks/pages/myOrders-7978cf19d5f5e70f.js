(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[678],{3436:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/myOrders",function(){return s(726)}])},726:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return $}});var n=s(5893),r=s(121),c=s(891),a=s(7294),i=s(9669),o=s.n(i),l=s(1955),d=s(9395),u=s(4028);function $(){var e=(0,a.useState)(!1),t=e[0],s=e[1],i=(0,a.useState)(Array),$=i[0],h=i[1],p=(0,a.useState)(!1),f=p[0],m=p[1],g=(0,a.useState)(!0),x=g[0],j=g[1],w=(0,a.useState)(!1),y=w[0],v=w[1],_=(0,a.useState)(),b=_[0],N=_[1];(0,a.useEffect)(function(){f||o()({method:"get",url:"https://api.jukte.kz/orders/archive",headers:{"content-type":"application/x-www-form-urlencoded;charset=utf-8",token:l.Z.get("accessToken")}}).then(function(e){e.data.data.orders.length&&h(e.data.data.orders),j(!1),m(!0)})}),(0,a.useEffect)(function(){y||o()({method:"get",url:"https://api.jukte.kz/user/info",headers:{"content-type":"application/x-www-form-urlencoded;charset=utf-8",token:l.Z.get("accessToken")}}).then(function(e){N(e.data),v(!0),j(!0),l.Z.set("role",e.data.role),"{}"===JSON.stringify(e.data.company.director)&&s(!0)}).catch(function(e){e&&v(!0),"User has not access"===e.response.data.message&&l.Z.set("userSuccess",t)})});var k=(0,a.useCallback)(function(){},[]);return(0,n.jsxs)("div",{className:"myOrders-container",children:[(0,n.jsx)(r.Z,{removeUrl:"/home",text:"На главную"}),(0,n.jsxs)("div",{className:"p-4 pb-2",children:[(0,n.jsxs)("div",{className:"flex w-full justify-between items-center",children:[(0,n.jsx)("h2",{children:"Мои заявки"}),(0,n.jsx)("div",{className:"inline-flex shrink-0 items-center justify-center rounded bg-blue-50",children:(0,n.jsxs)("p",{className:"p-2",children:["Количество: ",$.length]})})]}),x?(0,n.jsx)("div",{className:"w-full h-[calc(100vh-5rem)] flex items-center justify-center",children:(0,n.jsx)("div",{className:"text-center",children:(0,n.jsx)(d.$j,{"aria-label":"Center-aligned spinner example"})})}):(0,n.jsx)("div",{children:$.length>0?"logistician"===b.role&&(0,n.jsx)("div",{className:"flex flex-col gap-2 mt-4 bg-gray-400 p-4",children:$.slice(0,6).map(function(e,t){return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(c.Z,{shipment:e.loadType,cub:e.cubProduct,logPrice:e.logPrice,product:e.product,price:e.price,weight:e.weight,date:e.date,type:e.type,from:e.from,to:e.to,distance:e.distance,detail:e.detail,description:e.description,status:e.status,role:b.role,phone:e.ownerPhone,id:e._id},t)})})})||"driver"===b.role&&(0,n.jsx)("div",{className:"flex flex-col gap-2 mt-4 bg-gray-400 p-4",children:$.slice(0,6).map(function(e,t){return(0,n.jsx)(u.Z,{shipment:e.loadType,cub:e.cubProduct,logPrice:e.logPrice,product:e.product,price:e.price,weight:e.weight,date:e.date,type:e.type,from:e.from,to:e.to,distance:e.distance,detail:e.detail,description:e.description,status:e.status,role:b.role,phone:e.ownerPhone,id:e._id},t)})}):(0,n.jsx)("p",{className:"mt-4",children:"На данный момент у вас нету заявок"})})]}),$.length>6&&(0,n.jsx)("div",{className:"flex justify-center mb-6",children:(0,n.jsx)(d.tl,{currentPage:1,onPageChange:k,showIcons:!0,totalPages:Math.ceil($.length/4)})})]})}}},function(e){e.O(0,[556,885,873,656,75,774,888,179],function(){return e(e.s=3436)}),_N_E=e.O()}]);
//# sourceMappingURL=myOrders-7978cf19d5f5e70f.js.map