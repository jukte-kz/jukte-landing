(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[257],{6550:function(e,l,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/createOrders",function(){return s(4143)}])},121:function(e,l,s){"use strict";s.d(l,{Z:function(){return c}});var a=s(5893),t=s(5675),n=s.n(t),r=s(1163);function c(e){var l=e.removeUrl,s=e.text,t=(0,r.useRouter)(),c=function(){t.push(l)};return(0,a.jsxs)("div",{className:"flex items-center justify-between header-main w-full border-b-2 px-4 py-2",children:[(0,a.jsxs)("button",{onClick:c,className:"flex items-center",children:[(0,a.jsx)(n(),{width:24,height:24,src:"/assets/icon/left-arrow.svg",alt:""}),(0,a.jsx)("p",{className:"ml-4",children:s})]}),(0,a.jsx)(n(),{width:80,height:40,src:"/assets/image/logo.svg"})]})}},4143:function(e,l,s){"use strict";s.r(l),s.d(l,{default:function(){return P}});var a=s(4924),t=s(6042),n=s(9396),r=s(603),c=s(5893),i=s(121),o=s(9395),$=s(6627),u=s.n($),d=s(7294),m=s(1955),h=s(9669),p=s.n(h),x=s(129),b=s.n(x),v=s(9198),g=s.n(v);s(944);var f=s(3424),j=s(4298),_=s.n(j),N=s(1163),k=s(1751),y=s(1806),w=s(5165),C=s(381),S=s.n(C);function P(){var e,l=(0,d.useState)(""),s=l[0],$=l[1],h=(0,d.useState)(""),x=h[0],v=h[1],j=(0,d.useState)(""),C=j[0],P=j[1],F=(0,d.useState)(""),Z=F[0],z=F[1],M=(0,d.useState)(""),q=M[0],R=M[1],E=(0,d.useState)(""),D=E[0],T=E[1],L=(0,d.useState)([null,null]),O=L[0],U=L[1],A=(0,r.Z)(O,2),B=A[0],X=A[1],I=(0,d.useState)(""),Y=I[0],G=I[1],H=(0,d.useState)(""),J=H[0],K=H[1],Q=(0,d.useState)(""),V=Q[0],W=Q[1],ee=(0,d.useState)(""),el=ee[0],es=ee[1],ea=(0,d.useState)(""),et=ea[0],en=ea[1],er=(0,d.useState)(!1),ec=er[0],ei=er[1],eo=(0,d.useState)(""),e$=eo[0],eu=eo[1],ed=(0,d.useState)(!1),em=ed[0],eh=ed[1],ep=(0,d.useState)(!1),ex=ep[0],eb=ep[1],ev=(0,d.useState)(!1),eg=(ev[0],ev[1]),ef=(0,d.useRef)(),ej=(0,N.useRouter)(),e_=(0,d.useCallback)(function(e){P(e.target.value)},[]),e0=(0,d.useCallback)(function(e){$(e.target.value)},[]),eN=(0,d.useCallback)(function(e){v(e.target.value)},[]),e3=(0,d.useCallback)(function(e){R(e.target.value.split(" ")[2])}),e2=(0,d.useCallback)(function(e){T(e.target.value.split(" ")[2])});(0,d.useEffect)(function(){ei(Z.length>0&&q.length>0),eh(Z.length>0&&q.length>0&&B&&C.length>0&&s.length&&parseInt(et.replace(/\s/g,""))>0)}),(0,d.useEffect)(function(){parseInt(q)>22?"Тралл"!==V&&"Самосвал"!==V&&eg(!0):eg(!1)});var ek=function(e){U(e)},ey=function(e){W(e.label)},e8=function(e){es(e.label)},ew=function(){p()({method:"post",url:"https://api.jukte.kz/orders/",data:b().stringify({product:s,description:C,price:parseInt(et.replace(/\s/g,"")),weight:parseInt(q.replace(/\s/g,"")),date:"".concat(S()(B).format("L")," - ").concat(S()(X).format("L")),type:V,from:Y,to:J,loadType:el,cubProduct:D,logPrice:parseInt(e$.replace(/\s/g,"")),distance:parseInt(Z.replace(/\s/g,"")),detail:x}),headers:{"content-type":"application/x-www-form-urlencoded;charset=utf-8",token:m.Z.get("accessToken")}}).then(function(e){200===e.status&&eb(!0)})},e7=function(){var e=parseInt(Z.replace(/\s/g,"")),l=k.t.filter(function(e){return e.label===V})[0].price;if(27===l){var s=l*parseFloat(q)*e-l*parseFloat(q)*e*.1;en(s+" ₸"),eu(.1*s+" ₸")}else{var a=e*l-e*l*.1;en(a+" ₸"),eu(.1*a+" ₸")}},e4=function(){eb(!1),ej.push("/home")};return(0,c.jsxs)("div",{children:[(0,c.jsx)(i.Z,{removeUrl:"/home",text:"На главную"}),(0,c.jsxs)("div",{className:"settings-main py-6 px-4",children:[(0,c.jsx)("h1",{children:"Создать заявку"}),(0,c.jsx)("hr",{className:"mt-4"}),(0,c.jsx)("form",{className:"flex flex-col mt-4 login-form",children:(0,c.jsxs)("div",{className:"mb-auto",children:[(0,c.jsxs)("div",{className:"w-full mb-4 relative",style:{height:"400px"},children:[(0,c.jsx)("div",{id:"map",ref:ef}),(0,c.jsx)(_(),{id:"yandex-maps",src:"https://api-maps.yandex.ru/2.1/?apikey=0fb09044-5132-48a3-8653-02425b40b298&lang=ru_RU",onLoad:function(){var e=function(){var e=new ymaps.Map(ef.current,{center:[51.128207,71.43042],zoom:9,controls:["routePanelControl"]}).controls.get("routePanelControl");e.routePanel.options.set({types:{auto:!0,pedestrian:!1}}),e.routePanel.getRouteAsync().then(function(l){l.model.events.add("requestsuccess",function(){var s=l.getActiveRoute();s&&(P(s.properties.get("duration").text),z(s.properties.get("distance").text),G(e.routePanel.state.get("from")),K(e.routePanel.state.get("to")))})},function(e){console.log(e)})};ymaps.ready(e)}})]}),(0,c.jsxs)("div",{className:"input-container",children:[(0,c.jsx)("div",{className:"mb-2 block",children:(0,c.jsx)(o.__,{htmlFor:"product",value:"Наименование товара"})}),(0,c.jsx)(o.oi,{id:"product",type:"text",placeholder:"",required:!0,sizing:"lg",value:s,onChange:e0})]}),(0,c.jsxs)("div",{className:"input-container",children:[(0,c.jsx)("div",{className:"mb-2 block",children:(0,c.jsx)(o.__,{htmlFor:"desc",value:"Детали перевозки"})}),(0,c.jsx)(o.gx,{value:x,onChange:eN})]}),(0,c.jsxs)("div",{className:"input-container",children:[(0,c.jsx)("div",{className:"mb-2 block",children:(0,c.jsx)(o.__,{htmlFor:"surname",value:"Выберите дату отправления"})}),(0,c.jsx)(g(),(e={selected:B,dateFormat:"dd.MM.yyyy",onChange:ek,startDate:B,endDate:X,placeholderText:"ДД.ММ.ГГГГ - ДД.ММ.ГГГГ",dateFormatCalendar:"MMMM",className:"block w-full border focus\\:ring-blue-500:focus disabled:cursor-not-allowed disabled:opacity-50 bg-gray-50 border-gray-300 text-gray-900 focus:border-blue-500 focus:ring-blue-500 rounded-lg sm:text-md p-4",yearDropdownItemNumber:100,scrollableYearDropdown:!0,minDate:new Date,selectsRange:!0,isClearable:!0},(0,a.Z)(e,"onChange",function(e){U(e)}),(0,a.Z)(e,"locale",y.Z),e))]}),(0,c.jsxs)("div",{className:"input-container",children:[(0,c.jsx)("div",{className:"mb-2 block",children:(0,c.jsx)(o.__,{htmlFor:"transport",value:"Выберите тип транспорта"})}),(0,c.jsx)(f.ZP,{className:"react-select block w-full border focus\\:ring-blue-500:focus disabled:cursor-not-allowed disabled:opacity-50 bg-gray-50 border-gray-300 text-gray-900 focus:border-blue-500 focus:ring-blue-500 rounded-lg sm:text-md p-2",classNamePrefix:"name",placeholder:"Выберите тип транспорта",options:k.t,onChange:ey,isSearchable:!1})]}),(0,c.jsxs)("div",{className:"input-container",children:[(0,c.jsx)("div",{className:"mb-2 block",children:(0,c.jsx)(o.__,{htmlFor:"transportLoad",value:"Выберите тип погрузки"})}),(0,c.jsx)(f.ZP,{className:"react-select block w-full border focus\\:ring-blue-500:focus disabled:cursor-not-allowed disabled:opacity-50 bg-gray-50 border-gray-300 text-gray-900 focus:border-blue-500 focus:ring-blue-500 rounded-lg sm:text-md p-2",classNamePrefix:"name",placeholder:"Выберите тип погрузки",options:w.t,onChange:e8,isSearchable:!1})]}),(0,c.jsxs)("div",{className:"input-container",children:[(0,c.jsx)("div",{className:"mb-2 block",children:(0,c.jsx)(o.__,{htmlFor:"weight",value:"Вес груза"})}),(0,c.jsx)(u(),{value:q,maskChar:null,onChange:e3,mask:"тонн | 99",children:function(e){return(0,c.jsx)(o.oi,(0,n.Z)((0,t.Z)({},e),{id:"distance",type:"tel",placeholder:"тонн | 0",required:!0,sizing:"lg"}))}})]}),(0,c.jsxs)("div",{className:"input-container",children:[(0,c.jsx)("div",{className:"mb-2 block",children:(0,c.jsx)(o.__,{htmlFor:"cubProduct",value:"Кубометр груза"})}),(0,c.jsx)(u(),{value:D,maskChar:null,onChange:e2,mask:"м3 | 999",children:function(e){return(0,c.jsx)(o.oi,(0,n.Z)((0,t.Z)({},e),{onChange:e2,value:D,id:"distance",type:"tel",placeholder:"м3 | 0",sizing:"lg"}))}})]}),(0,c.jsxs)("div",{className:"input-container",children:[(0,c.jsx)("div",{className:"mb-2 block",children:(0,c.jsx)(o.__,{htmlFor:"distance",value:"Расстояние"})}),(0,c.jsx)(o.oi,{disabled:!0,id:"distance",type:"tel",value:Z,placeholder:"0 км",required:!0,sizing:"lg"})]}),(0,c.jsxs)("div",{className:"input-container",children:[(0,c.jsx)("div",{className:"mb-2 block",children:(0,c.jsx)(o.__,{htmlFor:"desc",value:"Время в пути"})}),(0,c.jsx)(o.oi,{onChange:e_,value:C,disabled:!0,id:"desc",type:"text",placeholder:"0 ч.",required:!0,sizing:"lg"})]}),(0,c.jsxs)("div",{className:"input-container",children:[(0,c.jsx)("div",{className:"mb-2 block",children:(0,c.jsx)(o.__,{htmlFor:"price",value:"Цена"})}),(0,c.jsx)(o.oi,{disabled:!0,id:"price",value:et,placeholder:"0 ₸",required:!0,sizing:"lg"})]}),(0,c.jsxs)("div",{className:"input-container",children:[(0,c.jsx)("div",{className:"mb-2 block",children:(0,c.jsx)(o.__,{htmlFor:"price",value:"Цена за услуги логиста"})}),(0,c.jsx)(o.oi,{disabled:!0,id:"price",value:e$,placeholder:"0 ₸",required:!0,sizing:"lg"})]})]})}),(0,c.jsx)("button",{type:"button",disabled:!ec,className:"flex items-center settings-button px-4 mt-4",onClick:e7,children:(0,c.jsx)("p",{className:"w-full",children:"Посчиатать"})}),(0,c.jsx)("button",{type:"button",disabled:!em,className:"flex items-center settings-button px-4 mt-4",onClick:ew,children:(0,c.jsx)("p",{className:"w-full",children:"Создать заявку"})})]}),(0,c.jsxs)(o.u_,{show:ex,position:"center",children:[(0,c.jsx)(o.u_.Body,{children:(0,c.jsxs)("div",{className:"w-full success-container",children:[(0,c.jsx)("p",{className:"text-center",children:"Заявка создана успешно!"}),(0,c.jsx)("div",{className:"success-animation mt-6",children:(0,c.jsxs)("svg",{className:"checkmark",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 52 52",children:[(0,c.jsx)("circle",{className:"checkmark__circle",cx:"26",cy:"26",r:"25",fill:"none"}),(0,c.jsx)("path",{className:"checkmark__check",fill:"none",d:"M14.1 27.2l7.1 7.2 16.7-16.8"})]})})]})}),(0,c.jsx)(o.u_.Footer,{children:(0,c.jsx)("button",{className:"w-full redirect-button",onClick:e4,children:"Перейти в меню"})})]})]})}},1751:function(e,l,s){"use strict";s.d(l,{t:function(){return a}});var a=[{value:1,label:"Рефрижератор",price:500},{value:2,label:"Самосвал",price:27},{value:3,label:"Тралл",price:1e3},{value:4,label:"Изотерм",price:400},{value:5,label:"Бортовой",price:400},{value:6,label:"Крытый",price:400},{value:7,label:"Открытый",price:400},{value:8,label:"Тент",price:400},{value:9,label:"Зерновоз",price:35},{value:10,label:"Газель",price:180},{value:11,label:"Мега 105",price:400}]},5165:function(e,l,s){"use strict";s.d(l,{t:function(){return a}});var a=[{value:1,label:"Задний"},{value:2,label:"Боковой"},{value:3,label:"Верхний"},{value:4,label:"Любой"},]},4654:function(){}},function(e){e.O(0,[556,885,873,656,129,646,588,774,888,179],function(){return e(e.s=6550)}),_N_E=e.O()}]);
//# sourceMappingURL=createOrders-36d96dd0ab2a10de.js.map